{"version":3,"sources":["all.js","index.js"],"names":["layout","body","document","querySelector","navbar","news","heading","contentArea","form","locationMenu","invisible","searchResult","located","routeList","search","cityBtn","highwayBtn","location","arriveCity","keyWord","btn","relocateBtn","direction","cityName","cityNameCH","Object","keys","cityStr","forEach","item","innerHTML","searchValue","isCityBus","city","keywords","cityName_zh","highwayOperatorName","domControl","data","addEventListener","e","target","classList","remove","getLatestNews","value","add","getAttribute","includes","options","selectedIndex","textContent","getHighwayOperatorData","searchAction","keyCode","layoutChange","getBusRouteData","alert","isResult","filterRules","keyword","filterRule","url","axios","get","headers","getAuthorizationHeader","then","res","cityData","drawBusRouteList","error","console","log","highwayData","ary","isMatch","every","addItem","OperatorName","Zh_tw","push","operatorStr","curDirectionValue","isHighWay","cardStr","length","info","name","RouteName","depart","DepartureStopNameZh","terminal","DestinationStopNameZh","id","str","SubRoutes","route","headsign","Headsign","SubRouteUID","isContainKeyword","indexOf","Direction","parseInt","routeCardStr","split","index","AppID","AppKey","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","HMAC","getHMAC","Authorization","getRandomInt","max","Math","floor","random","i","NewsURL","Title","searchInfo","busBtn","highway"],"mappings":"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","file":"all.js","sourcesContent":["\nconst layout ={\n  body: document.querySelector(\"body\"),\n  navbar: document.querySelector(\"#navbar\"),\n  news: document.querySelector(\"#news\"),\n  heading: document.querySelector(\"#heading\"),\n  contentArea: document.querySelector(\"#contentArea\"),\n  form:document.querySelector(\"#form\"),\n  locationMenu: document.querySelector(\"#locationMenu\"),\n  invisible:document.querySelector(\"#invisibleElement\"),\n  searchResult: document.querySelector(\"#searchResult\"),\n  located: document.querySelector(\"#located\"),\n  routeList: document.querySelector(\"#routeList\")\n} \nconst search ={\n    cityBtn: document.querySelector(\"#cityBus\"),\n    highwayBtn: document.querySelector(\"#highWayBus\"),\n    location: document.querySelector(\"#location\"),\n    arriveCity: document.querySelector(\"#arriveCity\"),\n    keyWord: document.querySelector(\"#keyWord\"),\n    btn: document.querySelector(\"#searchBtn\"),\n    relocateBtn: document.querySelector(\"#relocateBtn\"),\n    direction: document.querySelector(\"#direction\")\n}\nlet cityName ={\n  \"臺北市\":\"Taipei\",\n  \"新北市\":\"NewTaipei\",\n  \"桃園市\":\"Taoyuan\",\n  \"臺中市\":\"Taichung\",\n  \"臺南市\":\"Tainan\",\n  \"高雄市\":\"Kaohsiung\",\n  \"基隆市\":\"Keelung\",\n  \"新竹市\":\"Hsinchu\",\n  \"新竹縣\":\"HsinchuCounty\",\n  \"苗栗縣\":\"MiaoliCounty\",\n  \"彰化縣\":\"ChanghuaCounty\",\n  \"南投縣\":\"NantouCounty\",\n  \"雲林縣\":\"YunlinCounty\",\n  \"嘉義縣\":\"ChiayiCounty\",\n  \"嘉義市\":\"Chiayi\",\n  \"屏東縣\":\"PingtungCounty\",\n  \"宜蘭縣\":\"YilanCounty\",\n  \"花蓮縣\":\"HualienCounty\",\n  \"臺東縣\":\"TaitungCounty\",\n  \"金門縣\":\"KinmenCounty\",\n  \"澎湖縣\":\"PenghuCounty\",\n  \"連江縣\":\"LienchiangCounty\"\n};\nlet cityNameCH = Object.keys(cityName);\nlet cityStr = \"\";\ncityNameCH.forEach((item)=>{\n  cityStr += `<option value=${cityName[item]}>${item}</option>`;\n});\nsearch[\"location\"].innerHTML = `<option value=\"\" disabled selected hidden>請選擇縣/市</option>${cityStr}`;\n\n\nlet searchValue = {\n  isCityBus: true,\n  city:\"\",\n  keywords:\"\",\n  cityName_zh: \"\",\n  highwayOperatorName:\"\"\n}\n\n//dom操作\nfunction domControl(data){\n  //縣市選項監聽\n  search[\"location\"].addEventListener(\"change\",(e)=>{\n    //location select預設選項為灰色，點選後改回內文顏色\n    e.target.classList.remove(\"text-gray800\");\n    if(searchValue[\"isCityBus\"]){\n      getLatestNews(e.target.value);\n    }\n\n  });\n  //監聽市區公車的按鈕\n  search[\"cityBtn\"].addEventListener(\"click\",(e)=>{\n    search[\"cityBtn\"].classList.add(\"bus-btn-active\");\n    if(search[\"highwayBtn\"].getAttribute(\"class\").includes(\"bus-btn-active\")){\n      search[\"highwayBtn\"].classList.remove(\"bus-btn-active\");\n    }\n    searchValue[\"isCityBus\"] = true;\n    //更改市區公車的縣市選項為一個縣市範圍\n    search[\"location\"].options[search[\"location\"].selectedIndex].textContent = \"請選擇縣/市\";\n    layout[\"locationMenu\"].classList.remove(\"location-menu-arrow\");\n    search[\"location\"].innerHTML = `<option value=\"\" disabled selected hidden>請選擇縣/市</option>${cityStr}`;\n\n  });\n  //監聽公路客運的按鈕\n  search[\"highwayBtn\"].addEventListener(\"click\",(e)=>{\n    search[\"highwayBtn\"].classList.add(\"bus-btn-active\");\n    if(search[\"cityBtn\"].getAttribute(\"class\").includes(\"bus-btn-active\")){\n      search[\"cityBtn\"].classList.remove(\"bus-btn-active\");\n    }\n    searchValue[\"isCityBus\"] = false;\n    getHighwayOperatorData();\n  });\n\n//點選查詢按鈕\n  search.btn.addEventListener(\"click\",(e)=>{\n    searchAction();\n  });\n  //enter監聽\n  layout[\"body\"].addEventListener(\"keydown\",(e)=>{\n    if(e.keyCode === 13){\n      searchAction();\n    }\n  });\n  //重新選擇地點\n  search[\"relocateBtn\"].addEventListener(\"click\",(e)=>{\n    layoutChange(false);\n    search[\"location\"].value = \"\";\n    search[\"location\"].classList.add(\"text-gray800\");\n    search[\"direction\"].value = \"\";\n    getLatestNews(\"Taipei\");\n  });\n\n}\n//送出資料查詢，將資料填入變數中，執行查詢的動作\nfunction searchAction(){\n   //確認縣市欄位有填\n   if(search[\"location\"].value){\n    //將值填入searchValue中\n    searchValue[\"keywords\"] = search[\"keyWord\"].value;\n    if(searchValue[\"isCityBus\"]){\n      searchValue[\"city\"] = search[\"location\"].value;\n      searchValue[\"cityName_zh\"] = search[\"location\"].options[search[\"location\"].selectedIndex].textContent;\n      //結果頁面有個定位按鈕，要把字填上\n    layout[\"located\"].textContent = searchValue[\"cityName_zh\"];\n    }else{\n      searchValue[\"highwayOperatorName\"] = search[\"location\"].value;\n      //結果頁面有個定位按鈕，要把字填上\n      layout[\"located\"].textContent = searchValue[\"highwayOperatorName\"];\n    }\n\n\n    //修改版面\n    layoutChange(true);\n    //抓資料\n    getBusRouteData();\n  }else if(!searchValue[\"isCityBus\"]){\n    searchValue[\"arriveCityName_zh\"] = search[\"arriveCity\"].options[search[\"arriveCity\"].selectedIndex].textContent;\n  }else{\n    alert(\"請選擇縣市\");\n  }\n}\n\n//切換首頁或結果版面\nfunction layoutChange(isResult){\n  layout[\"routeList\"].innerHTML = ` <div class=\"text-center\">\n  <div class=\"spinner-border text-primary\" role=\"status\">\n<span class=\"visually-hidden\">Loading...</span>\n</div>\n</div>`;\n  if(isResult){\n    //remove\n    layout[\"navbar\"].classList.remove(\"d-block\");\n    layout[\"contentArea\"].classList.remove(\"pt-4\",\"bg-secondary\");\n    layout[\"form\"].classList.remove(\"justify-content-between\",\"h-100\");\n    layout[\"searchResult\"].classList.remove(\"d-none\");\n    //add\n    layout[\"contentArea\"].classList.add(\"bg-primary\");\n    layout[\"heading\"].classList.add(\"d-none\");\n    layout[\"form\"].classList.add(\"justify-content-end\",\"position-fixed\",\"bottom-0\",\"start-0\",\"px-4\",\"w-100\");\n    layout[\"invisible\"].classList.add(\"d-none\");\n  }else{\n        //add\n        layout[\"navbar\"].classList.add(\"d-block\");\n        layout[\"contentArea\"].classList.add(\"pt-4\",\"bg-secondary\");\n        layout[\"form\"].classList.add(\"justify-content-between\",\"h-100\");\n        layout[\"searchResult\"].classList.add(\"d-none\");\n        //remove\n        layout[\"contentArea\"].classList.remove(\"bg-primary\");\n        layout[\"heading\"].classList.remove(\"d-none\");\n        layout[\"form\"].classList.remove(\"justify-content-end\",\"position-fixed\",\"bottom-0\",\"start-0\",\"px-4\",\"w-100\");\n        layout[\"invisible\"].classList.remove(\"d-none\");\n  }\n}\n\n\n//重複的filter條件字串\nfunction filterRules(keyword){\n  return `contains(DepartureStopNameZh, '${keyword}')  or contains(DestinationStopNameZh,'${keyword}')`;\n}\n\n//取得公車路線資料\nfunction getBusRouteData(){\n  //設定$filter 條件\n  let filterRule = \"\";\n  if(searchValue[\"keywords\"]){\n    //如果有填寫關鍵字，加入篩選路線名稱、headsign\n    filterRule += `contains(RouteName/Zh_tw, '${searchValue[\"keywords\"]}') or SubRoutes/any(d: contains(d/Headsign, '${searchValue[\"keywords\"]}'))`;\n  }\n  //先確定是否為市區公車\n  if(searchValue[\"isCityBus\"] && searchValue[\"city\"]){\n    let url = `https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/${searchValue.city}?$format=JSON`;\n    //設定filter條件\n    if(filterRule !== \"\"){\n      //起迄站的篩選只有市區公車需要\n      filterRule += \" or \" + filterRules(searchValue[\"keywords\"]);\n      url += `&$filter=${filterRule}`;\n    }\n    //抓資料\n      axios.get( url ,\n         {\n            headers: getAuthorizationHeader()\n         })\n      .then((res)=>{\n        let cityData = res.data;\n        drawBusRouteList(cityData);\n          //選擇方向\n        search[\"direction\"].addEventListener(\"change\",(e)=>{\n          drawBusRouteList(cityData, e.target.value);\n        });\n      })\n      .catch((error)=>{\n        console.log(error);\n      }); \n    }else if(!searchValue[\"isCityBus\"] && searchValue[\"highwayOperatorName\"]){\n      //設定filter條件\n      if(filterRule !== \"\"){\n        filterRule += \" and \";\n      }\n      filterRule += `Operators/any(d: d/OperatorName/Zh_tw eq '${searchValue[\"highwayOperatorName\"]}')`;\n      // 抓資料\n      axios.get( `https://ptx.transportdata.tw/MOTC/v2/Bus/Route/InterCity?$filter=${filterRule}&$format=JSON` ,\n      {\n         headers: getAuthorizationHeader()\n      })\n      .then((res)=>{\n        let highwayData = res.data;\n        drawBusRouteList(highwayData);\n          //選擇方向\n        search[\"direction\"].addEventListener(\"change\",(e)=>{\n          drawBusRouteList(highwayData, e.target.value);\n        });\n      })\n      .catch((error)=>{\n        console.log(error);\n      }); \n    }\n   \n}\n\nfunction getHighwayOperatorData(){\n     //公路客運業者的API抓取\n     if(!searchValue[\"isCityBus\"]){\n      axios.get( `https://ptx.transportdata.tw/MOTC/v2/Bus/Operator/InterCity?$format=JSON` ,\n      {\n         headers: getAuthorizationHeader()\n      })\n      .then((res)=>{\n        let highwayData = res.data;\n        let ary = [];\n        highwayData.forEach((item)=>{\n          let isMatch = ary.every((addItem)=>{\n            return item.OperatorName.Zh_tw !== addItem;\n          });\n          if(isMatch){\n            ary.push(item.OperatorName.Zh_tw);\n          }\n        });\n        //更改公路客運的縣市選項為客運單位名稱\n        let operatorStr = \"\";\n        ary.forEach((item)=>{\n          operatorStr += `<option value=\"${item}\">${item}</option>`;\n        });\n        search[\"location\"].innerHTML = `<option value=\"\" disabled selected hidden>請選擇客運公司</option>${operatorStr}`;\n      })\n      .catch((error)=>{\n        console.log(error);\n      }); \n    }\n}\n\n\n//畫出公車路線列表\nfunction drawBusRouteList(data, curDirectionValue, isHighWay){\nlet cardStr = \"\";\n// console.log(data);\n//有資料，才跑迴圈\n  if(data.length){\n    data.forEach((item)=>{\n      //整理變數\n      let info = {\n      name: item.RouteName.Zh_tw,\n      depart: item.DepartureStopNameZh,\n      terminal: item.DestinationStopNameZh,\n      id:\"\"\n      };\n      let str = \"\";\n      //抓到路線資訊\n      item.SubRoutes.forEach((route)=>{\n        let headsign = route.Headsign;\n        info.id = route.SubRouteUID;\n        //篩選符合關鍵字的subRoute，再顯示\n        //先篩選路線名字、起迄站有包含關鍵字的\n        let isContainKeyword = info.name.indexOf(search[\"keyWord\"].value) >= 0 || \n          info.depart.indexOf(search[\"keyWord\"].value) >= 0 || \n          info.terminal.indexOf(search[\"keyWord\"].value) >= 0;\n          //headsign 中包含關鍵字的，但不是每個縣市都會有\n          if(headsign){\n            isContainKeyword = isContainKeyword || headsign.indexOf(search[\"keyWord\"].value) >= 0;\n          }\n          //公車因應路線篩選的選項，呈現不同路線\n          if(route.Direction === parseInt(curDirectionValue)){\n            if(isContainKeyword){\n              str += routeCardStr(info, route.Direction, headsign);\n            }else if(!search[\"keyWord\"].value){\n              str += routeCardStr(info, route.Direction, headsign);\n            }\n            //如果篩選選項為全部\n          }else if(!curDirectionValue){\n            if(isContainKeyword){\n              str += routeCardStr(info, route.Direction, headsign);\n            }else if(!search[\"keyWord\"].value){\n              str += routeCardStr(info, route.Direction, headsign);\n            }\n          }\n        \n        \n        \n          \n        \n      });\n      cardStr += str;\n    });\n  }\n  if(!cardStr){\n\n    cardStr +=`<li class=\"text-gray800 text-center\">找不到相符的公車路線</li>`;\n  }\nlayout[\"routeList\"].innerHTML = cardStr;\n}\n//路線卡片組字串\nfunction routeCardStr(info, direction, headsign){\n  let str = `<li class=\"card py-6 px-3 mb-3 hover\" id=${info.id}>\n  <h2 class=\"text-primary mb-1\">${info.name}</h2>`;\n  if(headsign){\n    let ary = headsign.split(/[→—─\\-－]/);\n    str += \"<p>\";\n    ary.forEach((item,index)=>{\n      if(index < ary.length - 1){\n        str += `${item}<span class=\"material-icons-outlined fs-2 text-info mx-2 align-text-bottom\">\n      trending_flat\n      </span>`;\n      }else{\n        str += `${item}`;\n      }\n    });\n    str += \"</p>\";\n  }else{\n    if(direction === 0){\n    str += `<p>${info.depart}<span class=\"material-icons-outlined fs-2 text-info mx-2 align-text-bottom\">\n        trending_flat\n        </span>${info.terminal}</p>`;\n  }else if(direction === 1){\n    str += `<p>${info.terminal}<span class=\"material-icons-outlined fs-2 text-info mx-2 align-text-bottom\">\n        trending_flat\n        </span>${info.depart}</p>`;\n  }else if(direction === 2){\n    str += `<p>${info.depart}<span class=\"material-icons-outlined fs-2 text-info mx-2 align-text-bottom\">\n        trending_flat\n        </span>${info.terminal}<span class=\"material-icons-outlined fs-2 text-info mx-2 align-text-bottom\">\n        trending_flat\n        </span>${info.depart}</p>`;\n  }\n}\nstr += '</li>';\nreturn str;\n}\n\n//header 金鑰加密\nfunction getAuthorizationHeader() {\n  //  填入自己 ID、KEY 開始\n      let AppID = '621db84a74fb48eeae9358661115b2d9';\n      let AppKey = 'JO9-itpiGC6DmZ-bmVWptlx5OO0';\n  //  填入自己 ID、KEY 結束\n      let GMTString = new Date().toGMTString();\n      let ShaObj = new jsSHA('SHA-1', 'TEXT');\n      ShaObj.setHMACKey(AppKey, 'TEXT');\n      ShaObj.update('x-date: ' + GMTString);\n      let HMAC = ShaObj.getHMAC('B64');\n      let Authorization = 'hmac username=\\\"' + AppID + '\\\", algorithm=\\\"hmac-sha1\\\", headers=\\\"x-date\\\", signature=\\\"' + HMAC + '\\\"';\n      return { 'Authorization': Authorization, 'X-Date': GMTString }; \n  }\n\n\n//隨機整數\nfunction getRandomInt(max) {\n    return Math.floor(Math.random() * max);\n}\n//取得最新消息\nfunction getLatestNews(city){\n  axios.get(`https://ptx.transportdata.tw/MOTC/v2/Bus/News/City/${city}?$top=30&$format=JSON`,{\n    headers: getAuthorizationHeader()\n  })\n  .then((res)=>{\n    let data = res.data;\n    let str = ``;\n    //如果最新資料超過3筆，則從中隨機顯示4筆在畫面上\n    if(data.length > 3){\n      for(let i = 0; i <= 3; i++){\n        let item = data[getRandomInt(data.length - 1)];\n        if(item.NewsURL){\n          str += `${i + 1}. <a href=${item.NewsURL} class=\"text-info-light\">${item.Title}</a>&emsp;`;\n        }else{\n          str += `${i + 1}. ${item.Title}&emsp;`;\n        }\n      }\n    }else{\n      //資料不超過3筆則全部顯示\n      data.forEach((item, index)=>{\n        if(item.NewsURL){\n          str += `${index + 1}. <a href=${item.NewsURL} class=\"text-info-light\">${item.Title}</a>&emsp;`;\n        }else{\n          str += `${index + 1}. ${item.Title}&emsp;`;\n        }\n        \n      });\n    }\n    \n    layout[\"news\"].innerHTML = str;\n  })\n  .catch((error)=>{\n    console.log(error);\n  });\n}\n\ngetLatestNews(\"Taipei\");\ndomControl();","const searchInfo ={\r\n      location: document.querySelector(\"#location\")\r\n  }\r\nconst busBtn ={\r\n    city: document.querySelector(\"#cityBus\"),\r\n    highway: document.querySelector(\"#highWayBus\")\r\n  };\r\nlet cityName ={\r\n    \"臺北市\":\"Taipei\",\r\n    \"新北市\":\"NewTaipei\",\r\n    \"桃園市\":\"Taoyuan\",\r\n    \"臺中市\":\"Taichung\",\r\n    \"臺南市\":\"Tainan\",\r\n    \"高雄市\":\"Kaohsiung\",\r\n    \"基隆市\":\"Keelung\",\r\n    \"新竹市\":\"Hsinchu\",\r\n    \"新竹縣\":\"HsinchuCounty\",\r\n    \"苗栗縣\":\"MiaoliCounty\",\r\n    \"彰化縣\":\"ChanghuaCounty\",\r\n    \"南投縣\":\"NantouCounty\",\r\n    \"雲林縣\":\"YunlinCounty\",\r\n    \"嘉義縣\":\"ChiayiCounty\",\r\n    \"嘉義市\":\"Chiayi\",\r\n    \"屏東縣\":\"PingtungCounty\",\r\n    \"宜蘭縣\":\"YilanCounty\",\r\n    \"花蓮縣\":\"HualienCounty\",\r\n    \"臺東縣\":\"TaitungCounty\",\r\n    \"金門縣\":\"KinmenCounty\",\r\n    \"澎湖縣\":\"PenghuCounty\",\r\n    \"連江縣\":\"LienchiangCounty\"\r\n  };\r\n  let cityNameCH = Object.keys(cityName);\r\n  let cityStr = `<option value=\"\" disabled selected hidden>請選擇縣/市</option>`;\r\n  cityNameCH.forEach((item)=>{\r\n    cityStr += `<option value=${cityName[item]}>${item}</option>`;\r\n  });\r\n  searchInfo.location.innerHTML = cityStr;\r\n   //location select預設選項為灰色，點選後改回內文顏色\r\n   searchInfo.location.addEventListener(\"click\",(e)=>{\r\n    e.target.classList.remove(\"text-gray800\");\r\n  });  "]}